<div class="card">
  <p-table
    class="custom-table m-auto"
    [paginator]="true"
    [totalRecords]="totalRecords"
    (onPageChange)="onClick($event)"
    [rowsPerPageOptions]="[5, 10]"
    [value]="cabins | filterDiscount : filteredStatus"
    [rows]="rows"
    [first]="first"
  >
    <ng-template #caption>
      <div
        class="flex justify-content-between align-items-center mx-auto mb-6 lg:flex-row flex-column gap-5"
      >
        <h2>All cabins</h2>
        <ul class="button-group ml-auto lg:ml-0">
          <li>
            @for (option of discountOptions; track $index) {
            <button
              (click)="applyFilter(option.value)"
              class="btn-g"
              [class.active]="filteredStatus === option.value"
            >
              {{ option.label }}
            </button>
            }
          </li>
        </ul>
      </div>
    </ng-template>

    <ng-template #header>
      <tr>
        <th>Cabin</th>
        <th>Capacity</th>
        <th>Price</th>
        <th>Discount</th>
      </tr>
    </ng-template>

    <ng-template #body let-cabin>
      <tr>
        <td>
          <p>{{ cabin.cabinNumber }}</p>
        </td>
        <td>
          <p>{{ cabin.capacity }}</p>
        </td>
        <td>
          <p>{{ cabin.price | currency : "USD" : "symbol" : "1.2-2" }}</p>
        </td>
        <td>
          @if (cabin.discount) {
          <span class="amount">
            {{ cabin.discount | currency : "USD" : "symbol" : "1.2-2" }}
          </span>
          } @else { - }
        </td>
      </tr>
    </ng-template>

    <ng-template #footer>
      <tr>
        <td colspan="5">
          Showing {{ (cabins | filterDiscount : filteredStatus).length }} of
          {{ totalRecords }} cabins
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
