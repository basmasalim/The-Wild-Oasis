<div class="card">
  <p-table
    class="custom-table m-auto"

    [value]="filteredCapinData"
    [paginator]="true"
    [rows]="10"
    [tableStyle]="{ 'min-width': '60rem' }"
  >
    <ng-template #caption>
      <ul class="flex justify-content-between w-9">
        <!-- todo test1 -->
        <!-- todo test1 -->

        <div class="card flex justify-center"></div>
        <li>
          <div class="flex items-center justify-between">
            <span class="text-6xl font-bold">Capins</span>
          </div>
        </li>
        <li>
          <div class="button-group">
            <button label="All" class="btn-g">All</button>
            <button
              (click)="applyFilter('indiscount')"
              label="InDiscount"
              class="btn-g"
            >
              InDiscount
            </button>
            <button
              (click)="applyFilter('nodiscount')"
              label="NoDiscount"
              class="btn-g"
            >
              NoDiscount
            </button>
          </div>
        </li>
        <li>
          <select class="select" (change)="onSortChange($event)">
            <option value="name-asc" selected>sort by name (A-Z)</option>
            <option value="name-desc">sort by name (Z-A)</option>
            <option value="regularPrice-asc">sort by price (low first)</option>
            <option value="regularPrice-desc">
              sort by price (high first)
            </option>
            <option value="capacity-asc">sort by capacity (low first)</option>
            <option value="capacity-desc">sort by capacity (high first)</option>
          </select>
        </li>
      </ul>
    </ng-template>
    <ng-template #header>
      <tr>
        <th>Name</th>
        <th>Image</th>
        <th>Price</th>
        <th>Category</th>
        <th>Reviews</th>
        <th>Status</th>
      </tr>
    </ng-template>
    <ng-template #body let-product>
      <tr>
        <td>{{ product.name }}</td>
        <td>
          <img
            [src]="
              'https://primefaces.org/cdn/primeng/images/demo/product/' +
              product.image
            "
            [alt]="product.name"
            class="w-24 rounded"
          />
        </td>
        <td>{{ product.price | currency : "USD" }}</td>
        <td>{{ product.category }}</td>
        <td></td>
        <td>
          <p-tag
            [value]="product.inventoryStatus"
            [severity]="getSeverity(product.inventoryStatus)"
          />
        </td>
      </tr>
    </ng-template>
    <ng-template #footer>
      <tr>
        <td colspan="6">
          In total there are {{ cabins ? cabins.length : 0 }} products.
=======
    [paginator]="true"
    [totalRecords]="totalRecords"
    (onPageChange)="onClick($event)"
    [rowsPerPageOptions]="[5, 10]"
    [value]="cabins | filterDiscount : filteredStatus"
    [rows]="rows"
    [first]="first"
  >
    <ng-template #caption>
      <div
        class="flex justify-content-between align-items-center mx-auto mb-6 lg:flex-row flex-column gap-5"
      >
        <h2>All cabins</h2>
        <ul class="button-group ml-auto lg:ml-0">
          <li>
            @for (option of discountOptions; track $index) {
            <button
              (click)="applyFilter(option.value)"
              class="btn-g"
              [class.active]="filteredStatus === option.value"
            >
              {{ option.label }}
            </button>
            }
          </li>
        </ul>
      </div>
    </ng-template>

    <ng-template #header>
      <tr>
        <th></th>
        <th>Cabin</th>
        <th>Capacity</th>
        <th>Price</th>
        <th>Discount</th>
      </tr>
    </ng-template>

    <ng-template #body let-cabin>
      <tr>
        <td style="width: 70px; height: 70px">
          <img src="images/logo-dark.png" class="w-full mb-1" alt="" />
        </td>
        <td>
          <p class="font-semibold text-2xl">{{ cabin.cabinNumber }}</p>
        </td>
        <td>
          <p>{{ cabin.capacity }}</p>
        </td>
        <td>
          <p class="font-semibold amount">
            {{ cabin.price | currency : "USD" : "symbol" : "1.2-2" }}
          </p>
        </td>
        <td>
          @if (cabin.discount) {
          <span class="dicount">
            {{ cabin.discount | currency : "USD" : "symbol" : "1.2-2" }}
          </span>
          } @else { - }
        </td>
        <td>
          <div class="card flex justify-content-end">
            <p-menu
              #menu
              [model]="getMenuItems(cabin)"
              [popup]="true"
              [style]="{
                'min-width': '150px',
                'font-size': '12px',
                'text-align': 'center',
              }"
              [appendTo]="'body'"
            ></p-menu>
            <button
              pButton
              icon="pi pi-ellipsis-v text-2xl"
              class="p-button-text p-button-rounded p-button-sm action-button"
              (click)="menu.toggle($event)"
              aria-label="Actions"
            ></button>
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template #footer>
      <tr>
        <td colspan="5">
          Showing {{ (cabins | filterDiscount : filteredStatus).length }} of
          {{ totalRecords }} cabins

        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
